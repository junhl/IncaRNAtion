%!TEX root = ../axearn.tex
\begin{tikzpicture}

 \newcommand{\BSep}{9pt}
 \newcommand{\ESep}{30pt}
 \newcommand{\HSep}{250pt}
  \tikzstyle{base}=[circle,draw,thick,inner sep=0,minimum width=20pt,fill=white]
%  \tikzstyle{basered}=[circle,draw,thick,inner sep=0,minimum width=20pt,fill=red]
  \tikzstyle{basesmall}=[circle,draw,thick,inner sep=0,minimum width=10pt,fill=white]
  \tikzstyle{basephantom}=[base,dashed]
    \tikzstyle{baseinvisible}=[base,dashed,opacity=0]
  \tikzstyle{linez}=[draw,snake=coil, segment aspect=.2,%
line after snake=0pt, 
        segment length=10pt,thick]
  \tikzstyle{lined}=[linez,draw,snake=none,thick]
  \tikzstyle{line}=[linez,draw,snake=none,thick]
  \tikzstyle{bp}=[in=90,out=90,draw,line width=1.5pt,blue,looseness=1.2]
  \tikzstyle{bptransparent}=[in=90,out=90,draw,line width=1.5pt,blue!20,looseness=1.2]  
  \tikzstyle{redbp}=[in=90,out=90,draw,line width=1.5pt,red,looseness=1.2]
  \tikzstyle{inblock}=[trapezium,trapezium angle=83, fill=blue!20, draw=blue!40,line width=1.5pt, inner sep=0]
    \tikzstyle{inblockgray}=[trapezium,trapezium angle=83, fill=lightgray!20, draw=lightgray,line width=1.5pt, inner sep=0]
   \tikzstyle{outblock}=[trapezium,trapezium angle=83, fill=red!50, draw=red!40,line width=1.5pt, inner sep=0]
  \tikzstyle{lbl}=[inner sep=0]
  \tikzstyle{arr}=[line width=1.3pt,->]
%

\begin{scope}[yshift=185pt]
  \node[] (tot) at (0,0) {\Huge Sequence:};
	\visible<2-2>{
		\node[right=\ESep of tot, baseinvisible] (iso-a-1) {$nt^1$};
		\foreach \i in {2,...,17}{
			\pgfmathtruncatemacro\j{\i - 1}
			\ifthenelse{\i>3 \and \i<9}{
					\node[right=\BSep of iso-a-\j, base] (iso-a-\i) {$nt^{\i}$};		
					\ifthenelse{\i>4}
						{\path[lined] (iso-a-\j) -- (iso-a-\i);}
						{}
				}{
					\node[right=\BSep of iso-a-\j, baseinvisible] (iso-a-\i) {$nt^{\i}$};
				}
		}
			\path[linez] (iso-a-1) to (iso-a-4);
			\path[linez] (iso-a-8) to (iso-a-17);
			\draw[bp] (iso-a-4) to (iso-a-8);
	}
	
	\visible<3>{
		\node[right=\ESep of tot, baseinvisible] (iso-a-1) {$nt^1$};
		\foreach \i in {2,...,17}{
			\pgfmathtruncatemacro\j{\i - 1}
			\ifthenelse{\i>3 \and \i<9}{
				\ifthenelse{\i=4}{\node[right=\BSep of iso-a-\j, base,fill=blue] (iso-a-\i) {$nt^{\i}$};}{				        
				\ifthenelse{\i=5}{\node[right=\BSep of iso-a-\j, base,fill=green] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=6}{\node[right=\BSep of iso-a-\j, base,fill=yellow] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=7}{\node[right=\BSep of iso-a-\j, base,fill=blue] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=8}{\node[right=\BSep of iso-a-\j, base,fill=red] (iso-a-\i) {$nt^{\i}$};}{
				}}}}}
				\ifthenelse{\i>4}
					{\path[lined] (iso-a-\j) -- (iso-a-\i);}
					{}
			}{
				\node[right=\BSep of iso-a-\j, baseinvisible] (iso-a-\i) {$nt^{\i}$};
			}
		}
			\path[linez] (iso-a-1) to (iso-a-4);
			\path[linez] (iso-a-8) to (iso-a-17);
			\draw[bp] (iso-a-4) to (iso-a-8);
	}
	
	\visible<4>{
		\node[right=\ESep of tot, baseinvisible] (iso-a-1) {$nt^1$};
		\foreach \i in {2,...,17}{
			\pgfmathtruncatemacro\j{\i - 1}
			\ifthenelse{\i>3 \and \i<9}{
				\ifthenelse{\i=4}{\node[right=\BSep of iso-a-\j, base,fill=blue] (iso-a-\i) {$nt^{\i}$};}{				        
				\ifthenelse{\i=5}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=6}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=7}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=8}{\node[right=\BSep of iso-a-\j, base,fill=red] (iso-a-\i) {$nt^{\i}$};}{
				}}}}}
				\ifthenelse{\i>4}
					{\path[lined] (iso-a-\j) -- (iso-a-\i);}
					{}
			}{
				\node[right=\BSep of iso-a-\j, baseinvisible] (iso-a-\i) {$nt^{\i}$};
			}
		}
			\path[linez] (iso-a-1) to (iso-a-4);
			\path[linez] (iso-a-8) to (iso-a-17);
			\draw[bp] (iso-a-4) to (iso-a-8);
	}
	
	\visible<5>{
		\node[right=\ESep of tot, baseinvisible] (iso-a-1) {$nt^1$};
		\foreach \i in {2,...,17}{
			\pgfmathtruncatemacro\j{\i - 1}
			\ifthenelse{\i>3 \and \i<9}{
				\ifthenelse{\i=4}{\node[right=\BSep of iso-a-\j, base,fill=green] (iso-a-\i) {$nt^{\i}$};}{				        
				\ifthenelse{\i=5}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=6}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=7}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=8}{\node[right=\BSep of iso-a-\j, base,fill=yellow] (iso-a-\i) {$nt^{\i}$};}{
				}}}}}
				\ifthenelse{\i>4}
					{\path[lined] (iso-a-\j) -- (iso-a-\i);}
					{}
			}{
				\node[right=\BSep of iso-a-\j, baseinvisible] (iso-a-\i) {$nt^{\i}$};
			}
		}
			\path[linez] (iso-a-1) to (iso-a-4);
			\path[linez] (iso-a-8) to (iso-a-17);
			\draw[bp] (iso-a-4) to (iso-a-8);
	}
	
	\visible<6>{
		\node[right=\ESep of tot, baseinvisible] (iso-a-1) {$nt^1$};
		\foreach \i in {2,...,17}{
			\pgfmathtruncatemacro\j{\i - 1}
			\ifthenelse{\i>3 \and \i<16}{
				\ifthenelse{\i=4}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=5}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=6}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=7}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=8}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\node[right=\BSep of iso-a-\j, base] (iso-a-\i) {$nt^{\i}$};
				}}}}}
				\ifthenelse{\i>4}
					{\path[lined] (iso-a-\j) -- (iso-a-\i);}
					{}
			}{
				\node[right=\BSep of iso-a-\j, baseinvisible] (iso-a-\i) {$nt^{\i}$};
			}
		}
			\path[linez] (iso-a-1) to (iso-a-4);
			\path[linez] (iso-a-15) to (iso-a-17);
			\draw[bptransparent] (iso-a-4) to (iso-a-8);
			\draw[bp] (iso-a-9) to (iso-a-15);
			\draw[bp] (iso-a-10) to (iso-a-14);
	}
	
	\visible<7>{
		\node[right=\ESep of tot, baseinvisible] (iso-a-1) {$nt^1$};
		\foreach \i in {2,...,17}{
			\pgfmathtruncatemacro\j{\i - 1}
			\ifthenelse{\i>3 \and \i<16}{
				\ifthenelse{\i=4}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=5}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=6}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=7}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=8}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=9}{\node[right=\BSep of iso-a-\j, base,fill=yellow] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=10}{\node[right=\BSep of iso-a-\j, base,fill=red] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=11}{\node[right=\BSep of iso-a-\j, base,fill=red] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=12}{\node[right=\BSep of iso-a-\j, base,fill=blue] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=13}{\node[right=\BSep of iso-a-\j, base,fill=yellow] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=14}{\node[right=\BSep of iso-a-\j, base,fill=green] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=15}{\node[right=\BSep of iso-a-\j, base,fill=green] (iso-a-\i) {$nt^{\i}$};}{
				}}}}}}}}}}}}
				\ifthenelse{\i>4}
					{\path[lined] (iso-a-\j) -- (iso-a-\i);}
					{}
			}{
				\node[right=\BSep of iso-a-\j, baseinvisible] (iso-a-\i) {$nt^{\i}$};
			}
		}
			\path[linez] (iso-a-1) to (iso-a-4);
			\path[linez] (iso-a-15) to (iso-a-17);
			\draw[bptransparent] (iso-a-4) to (iso-a-8);
			\draw[bp] (iso-a-9) to (iso-a-15);
			\draw[bp] (iso-a-10) to (iso-a-14);
	}
	
	\visible<8>{
		\node[right=\ESep of tot, baseinvisible] (iso-a-1) {$nt^1$};
		\foreach \i in {2,...,17}{
			\pgfmathtruncatemacro\j{\i - 1}
			\ifthenelse{\i>3 \and \i<16}{
				\ifthenelse{\i=4}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=5}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=6}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=7}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=8}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=9}{\node[right=\BSep of iso-a-\j, base,fill=red] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=10}{\node[right=\BSep of iso-a-\j, base,fill=red!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=11}{\node[right=\BSep of iso-a-\j, base,fill=red!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=12}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=13}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=14}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=15}{\node[right=\BSep of iso-a-\j, base,fill=blue] (iso-a-\i) {$nt^{\i}$};}{
				}}}}}}}}}}}}
				\ifthenelse{\i>4}
					{\path[lined] (iso-a-\j) -- (iso-a-\i);}
					{}
			}{
				\node[right=\BSep of iso-a-\j, baseinvisible] (iso-a-\i) {$nt^{\i}$};
			}
		}
			\path[linez] (iso-a-1) to (iso-a-4);
			\path[linez] (iso-a-15) to (iso-a-17);
			\draw[bptransparent] (iso-a-4) to (iso-a-8);
			\draw[bp] (iso-a-9) to (iso-a-15);
			\draw[bp] (iso-a-10) to (iso-a-14);
	}

	\visible<9>{
		\node[right=\ESep of tot, baseinvisible] (iso-a-1) {$nt^1$};
		\foreach \i in {2,...,17}{
			\pgfmathtruncatemacro\j{\i - 1}
			\ifthenelse{\i>3 \and \i<16}{
				\ifthenelse{\i=4}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=5}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=6}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=7}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=8}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=9}{\node[right=\BSep of iso-a-\j, base,fill=red!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=10}{\node[right=\BSep of iso-a-\j, base,fill=red!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=11}{\node[right=\BSep of iso-a-\j, base,fill=red!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=12}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=13}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=14}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=15}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				}}}}}}}}}}}}
				\ifthenelse{\i>4}
					{\path[lined] (iso-a-\j) -- (iso-a-\i);}
					{}
			}{
				\node[right=\BSep of iso-a-\j, baseinvisible] (iso-a-\i) {$nt^{\i}$};
			}
		}
			\path[linez] (iso-a-1) to (iso-a-4);
			\path[linez] (iso-a-15) to (iso-a-17);
			\draw[bp] (iso-a-4) to (iso-a-8);
			\draw[bp] (iso-a-9) to (iso-a-15);
			\draw[bp] (iso-a-10) to (iso-a-14);
	}
	
	\visible<10>{
		\node[right=\ESep of tot, baseinvisible] (iso-a-1) {$nt^1$};
		\foreach \i in {2,...,17}{
			\pgfmathtruncatemacro\j{\i - 1}
			\ifthenelse{\i>3 \and \i<16}{
				\ifthenelse{\i=4}{\node[right=\BSep of iso-a-\j, base,fill=blue] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=5}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=6}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=7}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=8}{\node[right=\BSep of iso-a-\j, base,fill=yellow] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=9}{\node[right=\BSep of iso-a-\j, base,fill=green] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=10}{\node[right=\BSep of iso-a-\j, base,fill=red!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=11}{\node[right=\BSep of iso-a-\j, base,fill=red!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=12}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=13}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=14}{\node[right=\BSep of iso-a-\j, base,fill=yellow] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=15}{\node[right=\BSep of iso-a-\j, base,fill=blue] (iso-a-\i) {$nt^{\i}$};}{
				}}}}}}}}}}}}
				\ifthenelse{\i>4}
					{\path[lined] (iso-a-\j) -- (iso-a-\i);}
					{}
			}{
				\node[right=\BSep of iso-a-\j, baseinvisible] (iso-a-\i) {$nt^{\i}$};
			}
		}
			\path[linez] (iso-a-1) to (iso-a-4);
			\path[linez] (iso-a-15) to (iso-a-17);
			\draw[bp] (iso-a-4) to (iso-a-8);
			\draw[bp] (iso-a-9) to (iso-a-15);
			\draw[bp] (iso-a-10) to (iso-a-14);
	}
	
	\visible<11>{
		\node[right=\ESep of tot, baseinvisible] (iso-a-1) {$nt^1$};
		\foreach \i in {2,...,17}{
			\pgfmathtruncatemacro\j{\i - 1}
			\ifthenelse{\i>1}{
				\ifthenelse{\i=4}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=5}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=6}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=7}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=8}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=9}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=10}{\node[right=\BSep of iso-a-\j, base,fill=red!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=11}{\node[right=\BSep of iso-a-\j, base,fill=red!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=12}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=13}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=14}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=15}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
					\node[right=\BSep of iso-a-\j, base] (iso-a-\i) {$nt^{\i}$};
				}}}}}}}}}}}}
			}{
				\node[right=\BSep of iso-a-\j, baseinvisible] (iso-a-\i) {$nt^{\i}$};
			}
			\ifthenelse{\i>2}{\path[lined] (iso-a-\j) -- (iso-a-\i);}{}
		}
			\path[linez] (iso-a-1) to (iso-a-2);
			\draw[bp] (iso-a-2) to (iso-a-17);			
			\draw[bp] (iso-a-3) to (iso-a-16);
			\draw[bp] (iso-a-4) to (iso-a-8);
			\draw[bp] (iso-a-9) to (iso-a-15);
			\draw[bp] (iso-a-10) to (iso-a-14);
	}
	
	\visible<12>{
		\node[right=\ESep of tot, baseinvisible] (iso-a-1) {$nt^1$};
		\foreach \i in {2,...,17}{
			\pgfmathtruncatemacro\j{\i - 1}
			\ifthenelse{\i>1}{
				\ifthenelse{\i=2}{\node[right=\BSep of iso-a-\j, base,fill=yellow] (iso-a-\i) {$nt^{\i}$};}{				        
				\ifthenelse{\i=3}{\node[right=\BSep of iso-a-\j, base,fill=green] (iso-a-\i) {$nt^{\i}$};}{				        
				\ifthenelse{\i=4}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=5}{\node[right=\BSep of iso-a-\j, base,fill=red] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=6}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=7}{\node[right=\BSep of iso-a-\j, base,fill=green] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=8}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=9}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=10}{\node[right=\BSep of iso-a-\j, base,fill=blue] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=11}{\node[right=\BSep of iso-a-\j, base,fill=red!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=12}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=13}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=14}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=15}{\node[right=\BSep of iso-a-\j, base,fill=green] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=16}{\node[right=\BSep of iso-a-\j, base,fill=blue] (iso-a-\i) {$nt^{\i}$};}{				        
				\ifthenelse{\i=17}{\node[right=\BSep of iso-a-\j, base,fill=green] (iso-a-\i) {$nt^{\i}$};}{				        
					\node[right=\BSep of iso-a-\j, base] (iso-a-\i) {$nt^{\i}$};
				}}}}}}}}}}}}}}}}
			}{
				\node[right=\BSep of iso-a-\j, baseinvisible] (iso-a-\i) {$nt^{\i}$};
			}
			\ifthenelse{\i>2}{\path[lined] (iso-a-\j) -- (iso-a-\i);}{}
		}
			\path[linez] (iso-a-1) to (iso-a-2);
			\draw[bp] (iso-a-2) to (iso-a-17);			
			\draw[bp] (iso-a-3) to (iso-a-16);
			\draw[bp] (iso-a-4) to (iso-a-8);
			\draw[bp] (iso-a-9) to (iso-a-15);
			\draw[bp] (iso-a-10) to (iso-a-14);
	}

	\visible<13>{
		\node[right=\ESep of tot, baseinvisible] (iso-a-1) {$nt^1$};
		\foreach \i in {2,...,17}{
			\pgfmathtruncatemacro\j{\i - 1}
			\ifthenelse{\i>1}{
				\ifthenelse{\i=2}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=3}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=4}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=5}{\node[right=\BSep of iso-a-\j, base,fill=green] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=6}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=7}{\node[right=\BSep of iso-a-\j, base,fill=red] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=8}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=9}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=10}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=11}{\node[right=\BSep of iso-a-\j, base,fill=red!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=12}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=13}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=14}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=15}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=16}{\node[right=\BSep of iso-a-\j, base,fill=red] (iso-a-\i) {$nt^{\i}$};}{				        
				\ifthenelse{\i=17}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
					\node[right=\BSep of iso-a-\j, base] (iso-a-\i) {$nt^{\i}$};
				}}}}}}}}}}}}}}}}
			}{
				\node[right=\BSep of iso-a-\j, baseinvisible] (iso-a-\i) {$nt^{\i}$};
			}
			\ifthenelse{\i>2}{\path[lined] (iso-a-\j) -- (iso-a-\i);}{}
		}
			\path[linez] (iso-a-1) to (iso-a-2);
			\draw[bp] (iso-a-2) to (iso-a-17);			
			\draw[bp] (iso-a-3) to (iso-a-16);
			\draw[bp] (iso-a-4) to (iso-a-8);
			\draw[bp] (iso-a-9) to (iso-a-15);
			\draw[bp] (iso-a-10) to (iso-a-14);
	}
	
	\visible<14>{
		\node[right=\ESep of tot, base] (iso-a-1) {$nt^1$};
		\foreach \i in {2,...,17}{
			\pgfmathtruncatemacro\j{\i - 1}
			\ifthenelse{\i>1}{
				\ifthenelse{\i=2}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=3}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=4}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=5}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=6}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=7}{\node[right=\BSep of iso-a-\j, base,fill=red!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=8}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=9}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=10}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=11}{\node[right=\BSep of iso-a-\j, base,fill=red!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=12}{\node[right=\BSep of iso-a-\j, base,fill=blue!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=13}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=14}{\node[right=\BSep of iso-a-\j, base,fill=yellow!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=15}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{
				\ifthenelse{\i=16}{\node[right=\BSep of iso-a-\j, base,fill=red!20] (iso-a-\i) {$nt^{\i}$};}{				        
				\ifthenelse{\i=17}{\node[right=\BSep of iso-a-\j, base,fill=green!20] (iso-a-\i) {$nt^{\i}$};}{					\node[right=\BSep of iso-a-\j, base] (iso-a-\i) {$nt^{\i}$};
				}}}}}}}}}}}}}}}}
			}{
				\node[right=\BSep of iso-a-\j, baseinvisible] (iso-a-\i) {$nt^{\i}$};
			}
			\ifthenelse{\i>1}{\path[lined] (iso-a-\j) -- (iso-a-\i);}{}
		}
			\draw[bp] (iso-a-2) to (iso-a-17);			
			\draw[bp] (iso-a-3) to (iso-a-16);
			\draw[bp] (iso-a-4) to (iso-a-8);
			\draw[bp] (iso-a-9) to (iso-a-15);
			\draw[bp] (iso-a-10) to (iso-a-14);
	}


\end{scope}


\begin{scope}[yshift=-20pt, xshift=70pt]
	\node[baseinvisible] (a-0) at (0,0) {};

	\foreach \i in {1,...,17}{
		\pgfmathtruncatemacro\j{\i - 1}
		\node[right=\BSep of a-\j, base] (a-\i) {};		
		\node[lbl,below=3pt of a-\i] (i-\i) {$\i$};
		\ifthenelse{\i>1}{\path[lined] (a-\j) -- (a-\i);}{}
	}

	\begin{pgfonlayer}{background}	
		\visible<1>{
			\coordinate (northr1) at ($ (a-9.north) + (0,20pt) $);
			 \node[rectangle,inner sep=2pt,fit=(a-1.west) (northr1) (a-17.east) (i-1) (i-17)] (r1) {};
			 \path[inblock]   (r1.south west) to  (r1.south east) to (r1.north east) 		to[out=90,in=90] (r1.north west) to (r1.south west) ;
			 \draw[bp] (a-2) to (a-17);
			 \draw[bp] (a-3) to (a-16);
			 \draw[bp] (a-4) to (a-8);
			 \draw[bp] (a-9) to (a-15);
			 \draw[bp] (a-10) to (a-14);
  		}
	\end{pgfonlayer}{background}
	
	\begin{pgfonlayer}{background}	
		\visible<2-5>{
			\coordinate (northr1) at ($ (a-5.north) + (0,20pt) $);
			\node[rectangle,inner sep=2pt,fit=(a-4.west) (northr1) (a-8.east) (i-4) (i-8)] (r1) {};
			\path[inblock]   (r1.south west) to  (r1.south east) to (r1.north east)	to[out=90,in=90] (r1.north west) to (r1.south west) ;
			
			\draw[bp] (a-4) to (a-8);
			 
			\draw[bptransparent] (a-2) to (a-17);
			\draw[bptransparent] (a-3) to (a-16);
			\draw[bptransparent] (a-9) to (a-15);
			\draw[bptransparent] (a-10) to (a-14);


  		}
	\end{pgfonlayer}{background}
	
	\begin{pgfonlayer}{background}	
		\visible<6-8>{
			\coordinate (northr1) at ($ (a-5.north) + (0,20pt) $);
			\node[rectangle,inner sep=2pt,fit=(a-4.west) (northr1) (a-8.east) (i-4) (i-8)] (r1) {};
			\path[inblockgray]   (r1.south west) to  (r1.south east) to (r1.north east)	to[out=90,in=90] (r1.north west) to (r1.south west) ;
			  
			\coordinate (northr1) at ($ (a-12.north) + (0,20pt) $);
			\node[rectangle,inner sep=2pt,fit=(a-9.west) (northr1) (a-15.east) (i-9) (i-15)] (r1) {};
			\path[inblock]   (r1.south west) to  (r1.south east) to (r1.north east)	to[out=90,in=90] (r1.north west) to (r1.south west) ;
			
			\draw[bptransparent] (a-2) to (a-17);
			\draw[bptransparent] (a-3) to (a-16);
			\draw[bptransparent] (a-4) to (a-8);
			\draw[bp] (a-9) to (a-15);
			\draw[bp] (a-10) to (a-14);			  
  		}
	\end{pgfonlayer}{background}
	
	\begin{pgfonlayer}{background}	
		\visible<9-10>{
			\coordinate (northr1) at ($ (a-9.north) + (0,20pt) $);
			\node[rectangle,inner sep=2pt,fit=(a-4.west) (northr1) (a-15.east) (i-4) (i-15)] (r1) {};
			\path[inblock]   (r1.south west) to  (r1.south east) to (r1.north east)	to[out=90,in=90] (r1.north west) to (r1.south west) ;
			
			\draw[bptransparent] (a-2) to (a-17);
			\draw[bptransparent] (a-3) to (a-16);
			\draw[bp] (a-4) to (a-8);
			\draw[bp] (a-9) to (a-15);
			\draw[bp] (a-10) to (a-14);			  
  		}
	\end{pgfonlayer}{background}
	
	\begin{pgfonlayer}{background}	
		\visible<11-13>{
			\coordinate (northr1) at ($ (a-9.north) + (0,20pt) $);
			\node[rectangle,inner sep=2pt,fit=(a-2.west) (northr1) (a-17.east) (i-2) (i-17)] (r1) {};
			\path[inblock]   (r1.south west) to  (r1.south east) to (r1.north east)	to[out=90,in=90] (r1.north west) to (r1.south west) ;
			
			\draw[bp] (a-2) to (a-17);
			\draw[bp] (a-3) to (a-16);
			\draw[bp] (a-4) to (a-8);
			\draw[bp] (a-9) to (a-15);
			\draw[bp] (a-10) to (a-14);			  
  		}
	\end{pgfonlayer}{background}
	
	\begin{pgfonlayer}{background}	
		\visible<14>{
			\coordinate (northr1) at ($ (a-9.north) + (0,20pt) $);
			\node[rectangle,inner sep=2pt,fit=(a-1.west) (northr1) (a-17.east) (i-1) (i-17)] (r1) {};
			\path[inblock]   (r1.south west) to  (r1.south east) to (r1.north east)	to[out=90,in=90] (r1.north west) to (r1.south west) ;
			\draw[bp] (a-2) to (a-17);
			\draw[bp] (a-3) to (a-16);
			\draw[bp] (a-4) to (a-8);
			\draw[bp] (a-9) to (a-15);
			\draw[bp] (a-10) to (a-14);			  
  		}
	\end{pgfonlayer}{background}

\end{scope}


\end{tikzpicture}